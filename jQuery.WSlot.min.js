(function(e){e.fn.WSlot=function(s){if(s=="rollTo"){var q=(Array.prototype.slice.call(arguments,1));this.trigger("WSlot.rollTo",q);return}if(s=="get"){return this.children("div.wslot-item-selected").index()}if(s=="getText"){return this.children("div.wslot-item-selected").text()}var f=e.extend({},e.fn.WSlot.defaults,s);this.off("WSlot.rollTo").on("WSlot.rollTo",function(i,t){self=e(this);if(t){o(self,t)}});var h={};h.position="relative";h[a]="rotateY("+f.rotation+"deg)";h[a+"-style"]="preserve-3d";this.css(h).addClass("wslot-container");var r="";if(f.items.length){var j=0;if(f.center=="first"){j=0}else{if(f.center=="last"){j=f.items.length-1}else{if(f.center=="center"){j=parseInt(f.items.length/2)}else{if(e.isNumeric(f.center)&&(f.center>=0)&&(f.center<f.items.length)){j=f.center}else{if(f.center>=f.items.length){j=f.items.length-1}else{j=0}}}}}var g=parseInt(this.height()/2);if(e.isNumeric(f.distance)){g=f.distance}var h="position: absolute;left: 0;width: 100%;height: "+f.item_height+"px;top: 50%;margin-top: -"+Math.round(f.item_height/2)+"px;";for(var n=0;n<f.items.length;n++){var m="";if(Math.abs(n-j)>f.displayed_length){m="display:none;"}var l=f.angle*(j-n);var p=0;var k=f.angle*f.displayed_length;if(Math.abs(l)<=k){p=1-(Math.abs(l)/(k*2))}r+='<div class="wslot-item '+((n==j)?"wslot-item-selected":"")+'" style="transform:rotateX('+l+"deg) translate3d(0,0,"+g+"px);"+m+h+"opacity:"+p+';">'+f.items[n]+"</div>"}return this.html(r).data("cur-angle",(j*f.angle)).off("touchstart mousedown").on("touchstart mousedown",function(t){var i=e(this);i.addClass("w-roll-touched").data("initialtouch",c(t).y);return false}).off("touchmove mousemove").on("touchmove mousemove",function(w){var u=e(this);if(u.is(".w-roll-touched")){var i=u.data("initialtouch")-c(w).y;var v=parseInt(u.data("cur-angle"))+parseInt(i/2);var x=(f.items.length-1)*f.angle;if(v<0){var t=0-v;v=-(25*t/(t+25))}else{if(v>x){var t=v-x;v=x+(25*t/(t+25))}}u.children("div").each(function(){var C=e(this);var A={};var B=v-(C.index()*f.angle);A.display="";if(Math.abs(B)>f.displayed_length*f.angle){A.display="none"}var z=0;var y=f.angle*f.displayed_length;if(Math.abs(B)<=y){z=1-(Math.abs(B)/(y*2))}A[a]="rotateX("+B+"deg) translateZ("+g+"px)";A.opacity=z;C.css(A)})}return false}).off("touchend mouseup mouseleave").on("touchend mouseup mouseleave",function(x){var u=e(this);if(u.is(".w-roll-touched")){var i=u.data("initialtouch")-c(x).y;var w=parseInt(u.data("cur-angle"))+parseInt(i/2);var y=(f.items.length-1)*f.angle;var v=Math.round(w/f.angle);if(w<0){var t=0-w;w=-(25*t/(t+25));v=0}else{if(w>y){var t=w-y;w=y+(25*t/(t+25));v=(f.items.length-1)}}u.data("cur-angle",w);o(u,v)}u.removeClass("w-roll-touched");return false})}else{return this}function o(v,u){if(u<0){u=0}else{if(u>=f.items.length){u=f.items.length-1}}var i=parseInt(v.data("cur-angle"));var t=u*f.angle;var w=t-i;d(10,1,function(z,y,A){var x=b(y,i,w,z);A.children("div").each(function(){var F=e(this);var D={};var E=x-(F.index()*f.angle);D.display="";if(Math.abs(E)>f.displayed_length*f.angle){D.display="none"}var C=0;var B=f.angle*f.displayed_length;if(Math.abs(E)<=B){C=1-(Math.abs(E)/(B*2))}D[a]="rotateX("+E+"deg) translateZ("+g+"px)";D.opacity=C;F.css(D)})},function(x){x.children("div").each(function(){var C=e(this).removeClass("wslot-item-selected");var A={};var B=t-(C.index()*f.angle);A.display="";if(Math.abs(B)>f.displayed_length*f.angle){A.display="none"}var z=0;var y=f.angle*f.displayed_length;if(Math.abs(B)<=y){z=1-(Math.abs(B)/(y*2))}A[a]="rotateX("+B+"deg) translateZ("+g+"px)";A.opacity=z;C.css(A);if(B==0){C.addClass("wslot-item-selected")}});x.data("cur-angle",t);x.trigger("WSlot.change",[u])},v)}};e.fn.WSlot.defaults={items:[],center:"first",distance:"auto",displayed_length:2,angle:30,rotation:0,item_height:20,};var a="transform";["webkit","Moz","O","ms"].every(function(f){var g=f+"Transform";if(typeof document.body.style[g]!=="undefined"){a=g}});function d(h,g,f,i,j){if(g<=h){if(typeof f=="function"){f(h,g,j)}g=g+1;window.requestAnimationFrame(function(){d(h,g,f,i,j)})}else{if(typeof i=="function"){i(j)}}}function c(f){if(f.originalEvent){if(f.originalEvent.changedTouches&&(f.originalEvent.changedTouches.length>=1)){return{x:f.originalEvent.changedTouches[0].pageX,y:f.originalEvent.changedTouches[0].pageY}}return{x:f.originalEvent.clientX,y:f.originalEvent.clientY}}else{if(f.changedTouches&&(f.changedTouches.length>=1)){return{x:f.changedTouches[0].pageX,y:f.changedTouches[0].pageY}}return{x:f.clientX,y:f.clientY}}}function b(g,f,i,h){return -i*(g/=h)*(g-2)+f}})(jQuery);